<div id="newsView"></div> <script> async function viewNews() { const params = new URLSearchParams(location.search); const slug = params.get('slug'); const res = await fetch('/assets/news.json', { cache: 'no-store' }); const items = await res.json(); if (!slug) { // listing const list = document.getElementById('newsView'); list.innerHTML = items.map(n => ` <article class="news-card"> <h3><a href="news.html?slug=${n.slug}">${n.title}</a></h3> <div class="date">${n.date ? new Date(n.date).toLocaleDateString() : ''}</div> ${n.image ? `<img src="${n.image}" alt="">` : ''} ${n.description ? `<p>${n.description}</p>` : ''} </article> `).join(''); } else { const n = items.find(x => x.slug === slug); const el = document.getElementById('newsView'); if (!n) { el.textContent = 'Article introuvable'; return; } el.innerHTML = ` <article class="news-article"> <h1>${n.title}</h1> <div class="date">${n.date ? new Date(n.date).toLocaleString() : ''}</div> ${n.image ? `<img src="${n.image}" alt="">` : ''} <div class="body">${n.body.replace(/\n/g,'<br>')}</div> </article> <p><a href="news.html">‚Üê Retour</a></p> `; } } document.addEventListener('DOMContentLoaded', viewNews); </script>